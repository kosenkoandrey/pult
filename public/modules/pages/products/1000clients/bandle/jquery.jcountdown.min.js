/*
jCountdown Plugin for jQuery JavaScript Library

v 1.1.1 02/12/2012

http://codecanyon.net/user/ufoufoufo

Copyright (c) 2012
*/

jQuery.fn.extend({jCountdown:function(){var B=function(a){this._target=a;this._width=50;this._height=64;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(b){if(b){this.frame(1);this.stop();var a=this;this._intervalId=setInterval(function(){a.frame()==a.totalFrames()?(clearInterval(a._intervalId),a.onFinish()):a.frame(a.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};
this.value=function(b,a){if(void 0==b)return this._value;this._value=b;this.update(a)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(b){if(void 0==b)return this._width;this._width=b};this.height=function(b){if(void 0==b)return this._height;this._height=b};this.frame=function(b){if(void 0==b)return this._frame;this._frame=b;b=-(9-this.value())*this.width();var a=-(this.frame()-1)*this.height();this._target.children(".text").css("background-position",
b+"px "+a+"px")};this.totalFrames=function(b){if(void 0==b)return this._totalFrames;this._totalFrames=b};this.fps=function(b){if(void 0==b)return this._fps;this._fps=b};this.update(!1)},C=function(a){this._target=a;this._width=50;this._height=64;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(b){if(b){this.frame(1);this.stop();var a=this;this._intervalId=setInterval(function(){a.frame()==a.totalFrames()?
(clearInterval(a._intervalId),a.onFinish()):a.frame(a.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(b,a){if(void 0==b)return this._value;this._value=b;this.update(a)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(b){if(void 0==b)return this._width;this._width=b};this.height=function(b){if(void 0==b)return this._height;this._height=b};this.frame=function(b){if(void 0==b)return this._frame;this._frame=
b;b=-((1+this.value())*this.height())+Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2)*this.height();this._target.children(".text").css("background-position","0px "+b+"px")};this.totalFrames=function(b){if(void 0==b)return this._totalFrames;this._totalFrames=b};this.fps=function(b){if(void 0==b)return this._fps;this._fps=b};this.update(!1)},D=function(a){this._target=a;this._height=this._width=60;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=
function(){clearInterval(this._intervalId)};this.update=function(b){if(b){this.frame(1);this.stop();var a=this;this._intervalId=setInterval(function(){a.frame()==a.totalFrames()?(clearInterval(a._intervalId),a.onFinish()):a.frame(a.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(b,a){if(void 0==b)return this._value;this._value=b;this.update(a)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(b){if(void 0==
b)return this._width;this._width=b};this.height=function(b){if(void 0==b)return this._height;this._height=b};this.frame=function(b){if(void 0==b)return this._frame;this._frame=b;b=this.value()+1;9<b&&(b=0);var a=this.frame()/this.totalFrames(),e;.4<=a&&.6>=a?e=0:.4>=a?e=1-a/.4:.6<=a&&(e=(a-.6)/.4);b=-(.5<a?this.value():b)*this.height();b-=3*(1-e);this._target.children(".text").css("background-position","0px "+b+"px").css("opacity",e);this._target.children(".cover").css("opacity",e)};this.totalFrames=
function(b){if(void 0==b)return this._totalFrames;this._totalFrames=b};this.fps=function(b){if(void 0==b)return this._fps;this._fps=b};this.update(!1)},E=function(a){this._target=a;this._height=this._width=60;this._heightSmall=this._widthSmall=42;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(b){if(b){this.frame(1);this.stop();var a=this;this._intervalId=setInterval(function(){a.frame()==
a.totalFrames()?(clearInterval(a._intervalId),a.onFinish()):a.frame(a.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(b,a){if(void 0==b)return this._value;this._value=b;this.update(a)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(b){if(void 0==b)return this._width;this._width=b};this.height=function(b){if(void 0==b)return this._height;this._height=b};this.frame=function(b){if(void 0==b)return this._frame;
this._frame=b;b=-this.value()*this.height();var a=Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2);0<a&&.001>a?a=0:0>a&&-.001<a&&(a=0);this._target.children(".text").css("background-position","0px "+b+"px").css("opacity",a)};this.totalFrames=function(a){if(void 0==a)return this._totalFrames;this._totalFrames=a};this.fps=function(a){if(void 0==a)return this._fps;this._fps=a};this.update(!1)},F=function(){this._days=[];this._hours=[];this._minutes=[];this._seconds=[];this._tickId=-1;this._tickDelay=
100;this._timeText="";this._timeZone=0;this._currentTime=this._time=null;this.checkTime=function(a){var b=new Date,b=new Date(b.getTime()+this._deltaTime);if(this._time.getTime()<b.getTime()+6E4*b.getTimezoneOffset()){for(b=0;b<this._days.length;b++)this._days[b].value(0);for(b=0;b<this._hours.length;b++)this._hours[b].value(0);for(b=0;b<this._minutes.length;b++)this._minutes[b].value(0);for(b=0;b<this._seconds.length;b++)this._seconds[b].value(0);this.stop();this.onFinish();return!0}var h=this.timeFormat(this._time.getTime()-
(b.getTime()+6E4*b.getTimezoneOffset()),this._days.length,this._hours.length,this._minutes.length,this._seconds.length).split("");if(!isNaN(this._time)){for(b=0;b<this._days.length;b++){var e=parseInt(h.shift(),10);e!=this._days[b].value()&&this._days[b].value(e,a)}for(b=0;b<this._hours.length;b++)e=parseInt(h.shift(),10),e!=this._hours[b].value()&&this._hours[b].value(e,a);for(b=0;b<this._minutes.length;b++)e=parseInt(h.shift(),10),e!=this._minutes[b].value()&&this._minutes[b].value(e,a);for(b=0;b<
this._seconds.length;b++)e=parseInt(h.shift(),10),e!=this._seconds[b].value()&&this._seconds[b].value(e,a)}return!1};this.textFormat=function(a,b,h){for(a=a.toString();a.length<b;)a=h+a;a.length>b&&(a=a.substr(a.length-b,b));return a};this.timeFormat=function(a,b,h,e,l){a=Math.floor(a/1E3);var m=a%60,d=Math.floor(a%3600/60),n=Math.floor(a%86400/3600);return this.textFormat(Math.floor(a/86400),b,"0")+this.textFormat(n,h,"0")+this.textFormat(d,e,"0")+this.textFormat(m,l,"0")};this.start=function(){this.stop();
for(var a=0;a<this._days.length;a++)this._days[a].update();for(a=0;a<this._hours.length;a++)this._hours[a].update();for(a=0;a<this._minutes.length;a++)this._minutes[a].update();for(a=0;a<this._seconds.length;a++)this._seconds[a].update();if(!this.checkTime(!1)){var b=this;this._tickId=setInterval(function(){b.checkTime(!0)},this._tickDelay)}};this.stop=function(){for(var a=0;a<this._days.length;a++)this._days[a].stop();for(a=0;a<this._hours.length;a++)this._hours[a].stop();for(a=0;a<this._minutes.length;a++)this._minutes[a].stop();
for(a=0;a<this._seconds.length;a++)this._seconds[a].stop();clearInterval(this._tickId)};this.onFinish=function(){};this.destroy=function(){for(var a=0;a<this._days.length;a++)this._days[a].destroy();for(a=0;a<this._hours.length;a++)this._hours[a].destroy();for(a=0;a<this._minutes.length;a++)this._minutes[a].destroy();for(a=0;a<this._seconds.length;a++)this._seconds[a].destroy();this._days=[];this._hours=[];this._minutes=[];this._seconds=[];this.stop()};this.items=function(a,b,h,e){this._days=a;this._hours=
b;this._minutes=h;this._seconds=e};this.timeText=function(a){if(void 0==a)return this._timeText;this._timeText=a;this.time(this.timeText(),this.timeZone())};this.timeZone=function(a){if(void 0==a)return this._timeZone;this._timeZone=a;this.time(this.timeText(),this.timeZone())};this.time=function(a,b){this._timeText=a;this._timeZone=b;var h=this._timeText.split("/").join(" ").split(":").join(" ").split(" "),e=parseInt(h[0],10),l=parseInt(h[1],10)-1,m=parseInt(h[2],10),d=parseInt(h[3],10),n=parseInt(h[4],
10)-60*this._timeZone,h=parseInt(h[5],10);this._time=new Date(e,l,m,d,n,h,0);this.start()}},t=function(){return s.data("countdown")},G=function(){if(void 0==t()){var a=new F;s.data("countdown",a);return t()}},A=function(){void 0!=t()&&(t().destroy(),s.removeData("countdown"))},H=function(a){q=G();var b=parseInt(jQuery.browser.version,10),h="string"==typeof a.timeText?a.timeText:"",e=parseFloat(a.timeZone);q._deltaTime=a.currentTime-(new Date).getTime();isNaN(e)&&(e=0);var l="string"==typeof a.style?
a.style.toLowerCase():"";switch(l){case "flip":break;case "slide":break;case "crystal":break;case "metal":break;default:l="flip"}var m="string"==typeof a.color?a.color.toLowerCase():"";switch(m){case "black":break;case "white":break;default:m="black"}var d=parseInt(a.width,10);10<=d||(d=0);var n=parseInt(a.textGroupSpace,10);0<=n||(n=15);var r=parseInt(a.textSpace,10);0<r||(r=0);var w=!1!=a.reflection,u=parseFloat(a.reflectionOpacity);0<u?100<u&&(u=100):u=10;var p=parseInt(a.reflectionBlur,10);0<
p?10<p&&(p=10):p=0;var g=2<parseInt(a.dayTextNumber,10)?parseInt(a.dayTextNumber,10):2,k=!1!=a.displayDay,t=!1!=a.displayHour,z=!1!=a.displayMinute,y=!1!=a.displaySecond,x=!1!=a.displayLabel;a="function"==typeof a.onFinish?a.onFinish:function(){};var c,f="",v="";c='<div class="jCountdown">';if(k){c+='<div class="group day'+(t||z||y?"":" lastItem")+'">';for(k=0;k<g;k++){f=" item"+(k+1);v=k==g-1?" lastItem":"";c+='<div class="container'+f+v+'">';if("slide"==l||"crystal"==l||"metal"==l)c+='<div class="cover"></div>';
c+='<div class="text"></div>';c+="</div>"}x&&(c+='<div class="label"></div>');c+="</div>"}if(t){c+='<div class="group hour'+(z||y?"":" lastItem")+'">';for(k=0;2>k;k++){f=" item"+(k+1);v=1==k?" lastItem":"";c+='<div class="container'+f+v+'">';if("slide"==l||"crystal"==l||"metal"==l)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}x&&(c+='<div class="label"></div>');c+="</div>"}if(z){c+='<div class="group minute'+(y?"":" lastItem")+'">';for(k=0;2>k;k++){f=" item"+(k+1);v=1==
k?" lastItem":"";c+='<div class="container'+f+v+'">';if("slide"==l||"crystal"==l||"metal"==l)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}x&&(c+='<div class="label"></div>');c+="</div>"}if(y){c+='<div class="group second lastItem">';for(k=0;2>k;k++){f=" item"+(k+1);v=1==k?" lastItem":"";c+='<div class="container'+f+v+'">';if("slide"==l||"crystal"==l||"metal"==l)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}x&&(c+='<div class="label"></div>');
c+="</div>"}s.html(c+"</div>");g=s.children(".jCountdown");g.addClass(l);g.addClass(m);g.children(".group").css("margin-right",n+"px");g.children(".group.lastItem").css("margin-right","0px");g.children(".group").children(".container").css("margin-right",r+"px");g.children(".group").children(".container.lastItem").css("margin-right","0px");!w||jQuery.browser.msie&&10>b||(reflectionObject=g.clone(),reflectionObject.addClass("reflection"),x&&reflectionObject.addClass("displayLabel"),100!=u&&reflectionObject.css("opacity",
u/100),0!=p&&reflectionObject.addClass("blur"+p),g=g.add(reflectionObject));f=jQuery('<div class="jCountdownContainer"></div>');f.append(g);s.append(f);0!=d&&(m=jQuery('<div class="jCountdownScale"></div>'),m.append(g),f.append(m),n=m.width(),r=m.height(),d/=n,w=-(1-d)*n/2,u=-(1-d)*r/2,p="scale("+d+")",f.width(n*d),f.height(r*d),jQuery.browser.msie&&8>=b?m.css("zoom",d):(m.css("transform",p).css("-moz-transform",p).css("-webkit-transform",p).css("-o-transform",p).css("-ms-transform",p),m.css("left",
w).css("top",u)));b="";d=0;m=[];n=[];r=[];w=[];f=function(){};switch(l){case "flip":f=B;break;case "slide":f=C;break;case "crystal":f=E;break;case "metal":f=D}d=1;for(b=".group.day>.container.item";g.find(b+d).length;)m.push(new f(g.find(b+d))),d++;d=1;for(b=".group.hour>.container.item";g.find(b+d).length;)n.push(new f(g.find(b+d))),d++;d=1;for(b=".group.minute>.container.item";g.find(b+d).length;)r.push(new f(g.find(b+d))),d++;d=1;for(b=".group.second>.container.item";g.find(b+d).length;)w.push(new f(g.find(b+
d))),d++;q.items(m,n,r,w);q.onFinish=a;q.time(h,e)};if(0<arguments.length){var s=this,q=t();if(1==arguments.length&&"object"==typeof arguments[0])void 0!=q&&(A(),s.children().remove()),H(arguments[0]);else if("string"==typeof arguments[0]&&void 0!=q)switch(arguments[0]){case "stop":q.stop();break;case "start":q.start();break;case "destroy":A(),s.children().remove()}}return this}});